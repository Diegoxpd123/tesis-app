<div class="admin-dashboard page-container starry-background" [class.dark-theme]="isDarkMode">
  <!-- Header con controles -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <h1 class="dashboard-title">
          <span class="title-icon">👨‍🏫</span>
          {{ tituloMessage }}
        </h1>
        <p class="dashboard-subtitle">
          {{ isAdmin ? 'Panel de administración - Lista de estudiantes' : 'Gestión de tus estudiantes' }}
        </p>
      </div>

      <div class="header-controls">
        <!-- Búsqueda -->
        <div class="search-container">
          <input
            type="text"
            class="search-input"
            placeholder="Buscar estudiantes..."
            [(ngModel)]="searchTerm"
            (input)="onSearchChange($event)"
          />
          <button
            class="search-clear"
            *ngIf="searchTerm"
            (click)="clearSearch()"
            title="Limpiar búsqueda">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>

        <!-- Controles -->






      </div>
    </div>
  </div>

  <br>

  <!-- Loading de Excel -->
  <div class="excel-loading-container" *ngIf="isUploadingExcel">
    <div class="excel-loading-content">
      <div class="loading-spinner">
        <div class="spinner"></div>
      </div>
      <div class="loading-text">
        <h3>📊 Cargando archivo Excel...</h3>
        <p *ngIf="totalPreguntas > 0">
          Procesando preguntas: {{ preguntasGuardadas }} / {{ totalPreguntas }}
        </p>
        <div class="progress-bar" *ngIf="totalPreguntas > 0">
          <div class="progress-fill" [style.width.%]="(preguntasGuardadas / totalPreguntas) * 100"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Resultado de Excel -->
  <div class="excel-result-container" *ngIf="showExcelResult">
    <div class="excel-result-content">
      <div class="result-icon">✅</div>
      <div class="result-text">
        <h3>¡Excel cargado exitosamente!</h3>
        <p>{{ excelResultMessage }}</p>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filters-container">
    <app-estudiante-filters
      [grados]="grados"
      [secciones]="secciones"
      [filtro]="filtro"
      (filtroChange)="onFiltroChange($event)">
    </app-estudiante-filters>
  </div>

  <br>

  <!-- Tabla de estudiantes -->
  <div class="table-container">
    <div class="table-header">
      <div class="table-title">
        <h3>Lista de Estudiantes</h3>
        <span class="table-count">{{ estudiantesFiltrados.length }} estudiantes</span>
      </div>

      <div class="table-controls">
        <select
          class="page-size-select"
          [value]="paginacion.pageSize"
          (change)="onPageSizeChange($event)">
          <option *ngFor="let size of getPageSizeOptions()" [value]="size">
            {{ size }} por página
          </option>
        </select>
      </div>
    </div>

    <app-estudiante-table
      [estudiantes]="estudiantesPaginados"
      [loading]="loading"
      [emptyMessage]="emptyMessage"
      [showProgressColumns]="!isAdmin"
      (verDetalles)="onVerDetalles($event)">
    </app-estudiante-table>

    <app-estudiante-pagination
      [config]="paginacion"
      (pageChange)="onPageChange($event)">
    </app-estudiante-pagination>
  </div>

</div>
